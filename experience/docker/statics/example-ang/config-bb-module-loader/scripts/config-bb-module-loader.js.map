{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*","webpack:///webpack/bootstrap b4a0c02381f362d8963d?f68d*","webpack:///./config-bb-module-loader/model.xml","webpack:///./config-bb-module-loader/scripts/index.js","webpack:///./config-bb-module-loader/scripts/page.js","webpack:///./config-bb-module-loader/scripts/util.js","webpack:///./config-bb-module-loader/scripts/system.js","webpack:///./config-bb-module-loader/scripts/dev.js","webpack:///./config-bb-module-loader/scripts/bundle.js"],"names":["systemConfig","bundleDefinition","System","config","configUndefined","undefined","detectVersion","window","portalClient","globalConfig","BB","param","b$Config","b$Portal","resourceRoot","cx5Config","b$","portal","cx6Config","getFeature","get","version","globalVar","fallbackStaticResourcesRoot","contextRoot","pageConfig","portalName","pageName","staticResourcesRoot","trimSlash","str","replace","isWidget","name","indexOf","isContainer","itemType","PROTOCOL_REGEX","isAbsolutePath","test","isCx5","getModuleFile","getModuleRoot","isRegisteredBySystem","systemPath","baseURL","defined","has","nameToPath","console","log","moduleRoot","moduleFile","systemJsConfig","itemPath","bundles","map","meta","i","length","bundle","page","bundleName","bundlePath","path","dependencies","forEach","dep","format","systemNormalize","normalize","systemTranslate","translate","parentName","isPlugin","call","load","source","args","readEnvUrlFlag","key","enableKey","disableKey","hasFlag","location","search","match","RegExp","flag","getStorage","localStorage","getItem","e","setStorage","value","setItem","getEnvFlag","defaultVal","envVal","storedVal","mocksEnabled","bundlesEnabled"],"mappings":"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","file":"config-bb-module-loader/scripts/config-bb-module-loader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"config-bb-module-loader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"config-bb-module-loader\"] = factory();\n\telse\n\t\troot[\"config-bb-module-loader\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b4a0c02381f362d8963d","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config-bb-module-loader/model.xml\n// module id = 0\n// module chunks = 1","/**\n * @module config-bb-module-loader\n *\n * @description\n * Configuration module for the SystemJS module loader\n *\n * This configuration module is intended to be replaced and overwritten per project. It is used\n * to customize the SystemJS Module loader, which can be used to both lazy-load modules demand and\n * to locate modules within optimized bundles.\n *\n * The full power of SystemJS is available and the documentation on its configuration can be found\n * on the project's page, specifically\n * https://github.com/systemjs/systemjs/blob/0.19.38/docs/config-api.md\n *\n * The default implementation in this module lazy-loads all modules based on the naming convention\n * that is compatible with other tooling (`bb-package`) and the default CXP file structure.\n *\n * E.g.\n * Loading `lib-bb-i18n-ng`\n * -> `<RESOURCE_ROOT>/static/features/[BBHOST]/lib-bb-i18n-ng/scripts/lib-bb-i18n-ng.js`\n *\n * Loading `widget-bb-sample-ng`\n * -> `<RESOURCE_ROOT>/static/widgets/[BBHOST]/widget-bb-example-ng/scripts/widget-bb-sample-ng.js`\n *\n * Loading `config-bb-locale/assets/custom-locale.json`\n * -> `<RESOURCE_ROOT>/static/features/[BBHOST]/config-bb-locale/assets/custom-locale.json`\n *\n * Where `RESOURCE_ROOT` is configured on the portal server\n *\n * The default implementation is generated by the [@bb-cli/bb-bundle](http://npmjs.com/package/@bb-cli/bb-bundle)\n * tool. It's recommended that you also use this tool to generate your own config as it will\n * allow you to create concatted and minified JS bundles.\n */\n\nimport pageConfig from './page';\nimport systemJsConfig from './system';\nimport bundleDefinition from './bundle';\n\nconst systemConfig = systemJsConfig(pageConfig(), bundleDefinition);\nSystem.config(systemConfig);\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/index.js","/* global System window */\n\nimport {\n  trimSlash,\n  isCx5,\n} from './util';\n\nconst configUndefined = () => undefined;\n\nconst detectVersion = () => (window.portalClient ? '6' : '5');\n\nconst globalConfig = (window.BB && window.BB.config)\n  ? param => window.BB.config[param]\n  : configUndefined;\n\nconst b$Config = b$Portal => param => {\n  if (param === 'contextRoot') {\n    return b$Portal.config.resourceRoot;\n  }\n  return b$Portal[param];\n};\n\nconst cx5Config = (window.b$ && window.b$.portal)\n  ? b$Config(window.b$.portal)\n  : configUndefined;\n\nconst cx6Config = (window.portalClient && window.portalClient.getFeature)\n  ? param => window.portalClient.getFeature('cxp').config.get(param)\n  : configUndefined;\n\nconst config = (param, version) => {\n  const globalVar = globalConfig(param);\n  if (globalVar !== undefined) {\n    return globalVar;\n  }\n  return (isCx5(version)) ? cx5Config(param) : cx6Config(param);\n};\n\nconst fallbackStaticResourcesRoot = (version) => {\n  const contextRoot = trimSlash(config('contextRoot', version));\n  if (isCx5(version)) {\n    return `${contextRoot}/static`;\n  }\n  return `${contextRoot}/static/items`;\n};\n\nconst pageConfig = () => {\n  const version = globalConfig('version') || detectVersion();\n  return {\n    version,\n    portalName: config('portalName', version),\n    pageName: config('pageName', version),\n    staticResourcesRoot: trimSlash(config('staticResourcesRoot', version))\n      || fallbackStaticResourcesRoot(version),\n  };\n};\n\nexport default pageConfig;\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/page.js","/* global System window */\n\nconst trimSlash = str => str && str.replace(/(.*)^\\/$/, '$1');\n\nconst isWidget = name => name.indexOf('widget-') === 0;\nconst isContainer = name => name.indexOf('container-') === 0;\n\nconst itemType = (name) => {\n  if (isWidget(name)) {\n    return 'widgets';\n  }\n  return (isContainer(name)) ? 'containers' : 'features';\n};\n\nconst PROTOCOL_REGEX = /^[A-z][A-z0-9+.-]+:\\/\\//;\nconst isAbsolutePath = (name) => name.indexOf('/') === 0 || (PROTOCOL_REGEX.test(name));\n\nconst isCx5 = (version) => version === '5';\n\nexport {\n  isAbsolutePath,\n  isCx5,\n  itemType,\n  trimSlash,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/util.js","\nimport { isAbsolutePath, isCx5, itemType } from './util';\n\n\nimport { mocksEnabled, bundlesEnabled } from './dev';\n\n\nconst getModuleFile = (name) =>\n  ((name.indexOf('/') !== -1) ? name : `${name}/scripts/${name}.js`);\n\nconst getModuleRoot = (name, version, staticResourcesRoot) => ((isCx5(version))\n  ? `${staticResourcesRoot}/${itemType(name)}/%5BBBHOST%5D`\n  : staticResourcesRoot);\n\nconst isRegisteredBySystem = (name) => {\n  const systemPath = `${System.baseURL}${name}`;\n  return (System.defined && System.defined[systemPath]) ||\n  System.has(systemPath);\n}\n\nconst nameToPath = (name, version, staticResourcesRoot) => {\n  if (isAbsolutePath(name)) {\n    return name.replace('[BBHOST]', '%5BBBHOST%5D');\n  }\n\n  \n  if (mocksEnabled() && name.indexOf('data-') === 0) {\n    name = `mock.${name}`; // eslint-disable-line no-param-reassign\n    console.log('load mock', name); // eslint-disable-line no-console\n  }\n  \n\n  const moduleRoot = getModuleRoot(name, version, staticResourcesRoot);\n  const moduleFile = getModuleFile(name);\n\n  return `${moduleRoot}/${moduleFile}`;\n};\n\nconst systemJsConfig = (config, bundleDefinition) => {\n  \n  if (!bundlesEnabled()) {\n    bundleDefinition = []; // eslint-disable-line no-param-reassign\n  }\n  \n  // Get bundles that are relevant for the current page.\n  const itemPath = name => nameToPath(name, config.version, config.staticResourcesRoot);\n  const bundles = {};\n  const map = {};\n  const meta = {};\n  for (let i = 0; i < bundleDefinition.length; i++) {\n    const bundle = bundleDefinition[i];\n    if (bundle.portal) {\n      if (config.portalName !== bundle.portal) continue;\n      if (bundle.page && config.pageName !== bundle.page) continue;\n    }\n    const bundleName = `bundle${i}`;\n    const bundlePath = itemPath(bundle.path);\n    bundles[bundlePath] = bundle.dependencies;\n    map[bundleName] = bundlePath;\n    bundle.dependencies.forEach(dep =>\n      (map[dep] = itemPath(dep))\n    );\n    meta[bundleName] = { format: 'amd' };\n  }\n\n  const systemNormalize = System.normalize;\n  const systemTranslate = System.translate;\n  return {\n    meta,\n    bundles,\n    map,\n    normalize(name, parentName, isPlugin) {\n      if (isRegisteredBySystem(name)) {\n        return systemNormalize.call(this, name, parentName, isPlugin);\n      }\n      return systemNormalize.call(this, itemPath(name), parentName, isPlugin);\n    },\n    translate(load, ...args) {\n      if (load.name.indexOf('.json') === load.name.length - 5) {\n        return `define([], ${load.source});`;\n      }\n      return systemTranslate.call(this, load, ...args);\n    },\n  };\n};\n\nexport default systemJsConfig;\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/system.js","/* global System window */\n\nconst readEnvUrlFlag = (key) => {\n  const enableKey = `enable-${key}`;\n  const disableKey = `disable-${key}`;\n  const hasFlag = flag => !!window.location.search.match(new RegExp(`[?&]${flag}(&|$)`));\n  if (hasFlag(enableKey)) {\n    return true;\n  } else if (hasFlag(disableKey)) {\n    return false;\n  }\n  return undefined;\n};\n\nconst getStorage = (key) => {\n  try {\n    return window.localStorage.getItem(key);\n  } catch (e) {\n    return null;\n  }\n};\n\nconst setStorage = (key, value) => {\n  try {\n    window.localStorage.setItem(key, value);\n  } catch (e) {\n    return;\n  }\n};\n\nconst getEnvFlag = (key, defaultVal = false) => {\n  let envVal = readEnvUrlFlag(key);\n  if (envVal !== undefined) {\n    setStorage(key, envVal ? '1' : '0');\n  } else {\n    const storedVal = getStorage(key);\n    envVal = (storedVal === null) ? defaultVal : storedVal === '1';\n  }\n  return envVal;\n};\n\nexport const mocksEnabled = () => getEnvFlag('mocks');\nexport const bundlesEnabled = () => getEnvFlag('bundles', true);\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/dev.js","// eslint-disable-next-line\nexport default [];\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/bundle.js"],"sourceRoot":""}